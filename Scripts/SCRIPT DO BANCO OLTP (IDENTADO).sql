/* CRIANDO O BANCO DE DADOS */

CREATE DATABASE CLUBE_OLTP
GO

/* CONECTANDO-SE AO BANCO DE DADOS */

USE CLUBE_OLTP
GO

/* CRIANDO AS TABELAS COM BASE NO QUE ESTÁ NA MODELAGEM LÓGICA */

CREATE TABLE INSCRITOS (
	IDINSCRITO 					INT 					NOT NULL
	, NOME 						VARCHAR(100) 			NOT NULL
	, SEXO 						CHAR(1) 				NOT NULL
	, NASCIMENTO 				DATE					NOT NULL
	, EMAIL 					VARCHAR(100) 			NULL
	, CPF 						VARCHAR(11) 			NOT NULL UNIQUE
	, SOCIO 					CHAR(1) 				NOT NULL
)
GO

CREATE TABLE ENDERECOS (
	IDENDERECO 					INT 					NOT NULL
	, RUA 						VARCHAR(150) 			NOT NULL
	, BAIRRO 					VARCHAR(100) 			NOT NULL
	, CIDADE 					VARCHAR(100) 			NOT NULL
	, ESTADO 					CHAR(2) 				NOT NULL
	, CEP 						INT 					NOT NULL
	, ID_INSCRITO				INT 					NOT NULL	
)
GO

CREATE TABLE TELEFONES (
	IDTELEFONE 					INT 					NOT NULL
	, TIPO 						CHAR(3) 				NOT NULL
	, NUMERO 					VARCHAR(12) 			NOT NULL
	, ID_INSCRITO 				INT 					NOT NULL
)
GO

CREATE TABLE ATIVIDADES (
	IDATIVIDADE 				INT 					NOT NULL
	, ATIVIDADE 				VARCHAR(70) 			NOT NULL
	, VALOR 					DECIMAL(10,2) 			NOT NULL
	, VALOR_SOCIO 				DECIMAL(10,2) 			NOT NULL
	
)
GO

CREATE TABLE INSCRITOS_ATIVIDADES (
	IDIA 						INT 					NOT NULL
	, ID_INSCRITO 				INT 					NOT NULL
	, ID_ATIVIDADE 				INT 					NOT NULL
)
GO

CREATE TABLE FUNCIONARIOS (
	IDFUNCIONARIO				INT						NOT NULL 
	, NOME						VARCHAR(100)			NOT NULL 
	, SEXO						CHAR(1)					NOT NULL
	, NASCIMENTO				DATE					NOT NULL 
	, EMAIL						VARCHAR(100)			NOT NULL 
	, ID_DEPARTAMENTO			INT						NOT NULL
)
GO 

CREATE TABLE ENDERECOS_FUNCIONARIOS (
	IDEF 						INT 					NOT NULL
	, RUA 						VARCHAR(150) 			NOT NULL
	, BAIRRO 					VARCHAR(100) 			NOT NULL
	, CIDADE 					VARCHAR(100) 			NOT NULL
	, ESTADO 					CHAR(2) 				NOT NULL
	, CEP 						INT 					NOT NULL
	, ID_FUNCIONARIO 			INT 					NOT NULL	
)
GO

CREATE TABLE TELEFONES_FUNCIONARIOS (
	IDTF 						INT 					NOT NULL
	, TIPO 						CHAR(3) 				NOT NULL
	, NUMERO 					VARCHAR(12) 			NOT NULL
	, ID_FUNCIONARIO 			INT 					NOT NULL
)
GO


CREATE TABLE DEPARTAMENTOS (
	IDDEPARTAMENTO				INT						NOT NULL
	, DEPARTAMENTO				VARCHAR(100)			NOT NULL 
)
GO 

CREATE TABLE REGISTROS (
	IDREG						INT						NOT NULL
	, DATA						DATE 					NOT NULL
	, ID_FUNCIONARIO			INT						NOT NULL
	, ID_INSCRITO				INT						NOT NULL
	, ID_ATIVIDADE				INT						NOT NULL
)
GO

/* AGORA, VAMOS CRIAR AS CARGAS DE "INSERTS" PARA PREENCHER AS TABELAS */

INSERT INTO INSCRITOS VALUES(1,'Carlos Pereira da Silva','M','1975-02-02','carlospereira@gmail.com','12563256987','S')
INSERT INTO INSCRITOS VALUES(2,'Antônio Ferreira Santos','M','1980-06-07','antoniof@outlook.com','85997441232','N')
INSERT INTO INSCRITOS VALUES(3,'Samanta Costa Oliveira','F','1965-10-12',NULL,'69874587452','S')
INSERT INTO INSCRITOS VALUES(4,'Tereza Braga Huck','F','1989-11-28','terezabh@gmail.com','21369632145','N')
INSERT INTO INSCRITOS VALUES(5,'José Erivaldo Nascimento','M','1960-12-04',NULL,'95135748657','S')
INSERT INTO INSCRITOS VALUES(6,'Carolina Fragoso Spadozzo','F','1995-08-14','carolfradozzo@gmail.com','65491324785','N')
INSERT INTO INSCRITOS VALUES(7,'Karl Lübeck Ferrosa','M','1993-07-13','karllubeck@gmail.com','56985698547','N')
INSERT INTO INSCRITOS VALUES(8,'Emerson Silva Costa','M','1985-11-09','emersonsc@bol.com.br','98565874568','S')
INSERT INTO INSCRITOS VALUES(9,'Roberto Coelho Bastos','M','1982-12-14','robertcoelhob@gmail.com','26598742145','N')
INSERT INTO INSCRITOS VALUES(10,'Gustavo Bragantino Fraga','M','1990-11-02','brafravo@gmail.com','23156478987','N')
GO

INSERT INTO ENDERECOS VALUES(1,'Rua Aperea','Ilha do Governador','Rio de Janeiro','RJ',265896589,1)
INSERT INTO ENDERECOS VALUES(2,'Rua Fernando de Azevedo','Ilha do Governador','Rio de Janeiro','RJ',985698745,2)
INSERT INTO ENDERECOS VALUES(3,'Rua Domingos Segreto','Ilha do Governador','Rio de Janeiro','RJ',569874569,3)
INSERT INTO ENDERECOS VALUES(4,'Rua Cerro Azul','Ilha do Governador','Rio de Janeiro','RJ',859874587,4)
INSERT INTO ENDERECOS VALUES(5,'Rua Budapeste','Ilha do Governador','Rio de Janeiro','RJ',985687458,5)
INSERT INTO ENDERECOS VALUES(6,'Rua Pio Dutra','Ilha do Governador','Rio de Janeiro','RJ',98756987,6)
INSERT INTO ENDERECOS VALUES(7,'Rua Paraim','Ilha do Governador','Rio de Janeiro','RJ',841233698,7)
INSERT INTO ENDERECOS VALUES(8,'Rua Doutor Jorge Diniz','Ilha do Governador','Rio de Janeiro','RJ',879787879,8)
INSERT INTO ENDERECOS VALUES(9,'Rua Cipouna','Ilha do Governador','Rio de Janeiro','RJ',236547898,9)
INSERT INTO ENDERECOS VALUES(10,'Rua Cabo Frio','Ilha do Governador','Rio de Janeiro','RJ',212325898,10)
GO

INSERT INTO TELEFONES VALUES(1,'CEL','219659874587',1)
INSERT INTO TELEFONES VALUES(2,'RES','2124689988',1)
INSERT INTO TELEFONES VALUES(3,'CEL','21985856545',2)
INSERT INTO TELEFONES VALUES(4,'RES','2128997885',3)
INSERT INTO TELEFONES VALUES(5,'CEL','21985856654',4)
INSERT INTO TELEFONES VALUES(6,'RES','2126644556',5)
INSERT INTO TELEFONES VALUES(7,'CEL','21998964552',6)
INSERT INTO TELEFONES VALUES(8,'CEL','21999654587',7)
INSERT INTO TELEFONES VALUES(9,'RES','2125556898',8)
INSERT INTO TELEFONES VALUES(10,'CEL','21985654798',8)
INSERT INTO TELEFONES VALUES(11,'CEL','21968623252',9)
INSERT INTO TELEFONES VALUES(12,'CEL','21987896541',10)
GO

INSERT INTO ATIVIDADES VALUES(1,'Futebol',85.00,65.00)
INSERT INTO ATIVIDADES VALUES(2,'Vôlei',75.00,55.00)
INSERT INTO ATIVIDADES VALUES(3,'Academia',185.00,165.00)
INSERT INTO ATIVIDADES VALUES(4,'Capoeira',95.00,75.00)
INSERT INTO ATIVIDADES VALUES(5,'Natação',205.00,185.00)
INSERT INTO ATIVIDADES VALUES(6,'Judô',105.00,85.00)
GO 

INSERT INTO INSCRITOS_ATIVIDADES VALUES(1,1,5)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(2,2,6)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(3,3,5)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(4,4,2)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(5,4,5)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(6,5,5)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(7,6,2)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(8,6,3)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(9,6,5)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(10,7,1)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(11,7,3)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(12,7,6)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(13,8,3)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(14,8,1)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(15,8,6)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(16,9,3)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(17,10,3)
INSERT INTO INSCRITOS_ATIVIDADES VALUES(18,10,1)
GO
-------------------------------------------------------------------------
/* INSERTS DA PARTE DE DEPARTAMENTOS */

INSERT INTO DEPARTAMENTOS VALUES(1,'Administrativo')
INSERT INTO DEPARTAMENTOS VALUES(2,'Financeiro')
INSERT INTO DEPARTAMENTOS VALUES(3,'Manutenção')
INSERT INTO DEPARTAMENTOS VALUES(4,'Limpeza')
INSERT INTO DEPARTAMENTOS VALUES(5,'Marketing')
INSERT INTO DEPARTAMENTOS VALUES(6,'Academia')
INSERT INTO DEPARTAMENTOS VALUES(7,'Natação')
INSERT INTO DEPARTAMENTOS VALUES(8,'Futebol')
INSERT INTO DEPARTAMENTOS VALUES(9,'Judô')
INSERT INTO DEPARTAMENTOS VALUES(10,'Capoeira')
INSERT INTO DEPARTAMENTOS VALUES(11,'Vôlei')
GO
-----------------------------------------------------------------------------------------------------------------------------
/* INSERTS DOS FUNCIONÁRIOS */

INSERT INTO FUNCIONARIOS VALUES(1,'Paula de Souza Andrade','F','1987-02-17','paulasa_personal@outlook.com',6)
INSERT INTO FUNCIONARIOS VALUES(2,'José Pereira Camargo','M','1978-05-26','senseicamargo@gmail.com',9)
INSERT INTO FUNCIONARIOS VALUES(3,'Francisco Oliveira Santos','M','1988-03-04','franoliver_futsantos@gmail.com',8)
INSERT INTO FUNCIONARIOS VALUES(4,'Gemima Severina Lima','F','1970-08-10','gema_adm@gmail.com',1)
INSERT INTO FUNCIONARIOS VALUES(5,'Heitor Savarotte Gomes','M','1989-02-25','heitor_contabil@outlook.com',2)
INSERT INTO FUNCIONARIOS VALUES(6,'Maria Garcia Xavier','F','1980-07-24','marigar_mkt@gmail.com',5)
INSERT INTO FUNCIONARIOS VALUES(7,'Paulo Santos Velasquez','M','1975-01-08','volei_santos@gmail.com',11)
INSERT INTO FUNCIONARIOS VALUES(8,'Pedro Antunes Lamarca','M','1991-11-18','mecapedro_al@gmail.com',3)
INSERT INTO FUNCIONARIOS VALUES(9,'Silvano Espadarote Corrêa','M','1972-10-28','silvano_ec72@gmail.com',4)
INSERT INTO FUNCIONARIOS VALUES(10,'Natasha Alonço Moraes','F','1993-04-17','prof.nat_nat@gmail.com',7)
INSERT INTO FUNCIONARIOS VALUES(11,'Arthur Zimbongo Silva','M','1992-03-22','zimbongo_cap@gmail.com',10)
INSERT INTO FUNCIONARIOS VALUES(12,'Maurício Gurgel Moreira','M','1988-01-14','maugelmor@gmail.com',7)
INSERT INTO FUNCIONARIOS VALUES(13,'Marcos Machado Andrade','M','1985-06-20','marcosma_personal@outlook.com',6)
INSERT INTO FUNCIONARIOS VALUES(14,'Sílvia Cruz Brandão','F','1996-07-12','sec.silvia_cb@gmail.com',1)
INSERT INTO FUNCIONARIOS VALUES(15,'Letícia Marques Sanches','F','1989-10-10','leticia_89@gmail.com',4)
GO

INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(1,'Rua Demétrio de Tôledo','Ilha do Governador','Rio de Janeiro','RJ',213265965,1)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(2,'Rua Astilbe','Ilha do Governador','Rio de Janeiro','RJ',216598565,2)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(3,'Rua Dom Emanuel Gomes','Ilha do Governador','Rio de Janeiro','RJ',218974589,3)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(4,'Rua Ericeira','Ilha do Governador','Rio de Janeiro','RJ',216589658,4)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(5,'Rua Tramandai','Ilha do Governador','Rio de Janeiro','RJ',226589658,5)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(6,'Rua Jorge de Lima','Ilha do Governador','Rio de Janeiro','RJ',215647898,6)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(7,'Rua Babaçu','Ilha do Governador','Rio de Janeiro','RJ',216589774,7)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(8,'Rua Caninare','Ilha do Governador','Rio de Janeiro','RJ',256254789,8)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(9,'Rua Flamarion','Ilha do Governador','Rio de Janeiro','RJ',122145874,9)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(10,'Rua Marquês de Muritiba','Ilha do Governador','Rio de Janeiro','RJ',216589887,10)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(11,'Rua Cel. Rogaciano Mendes','Ilha do Governador','Rio de Janeiro','RJ',226587748,11)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(12,'Estrada do Pinhão','Ilha do Governador','Rio de Janeiro','RJ',223665879,12)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(13,'Rua Franco Job','Ilha do Governador','Rio de Janeiro','RJ',216589655,13)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(14,'Rua Orcadas','Ilha do Governador','Rio de Janeiro','RJ',231455748,14)
INSERT INTO ENDERECOS_FUNCIONARIOS VALUES(15,'Rua Haia','Ilha do Governador','Rio de Janeiro','RJ',586598789,15)
GO

INSERT INTO TELEFONES_FUNCIONARIOS VALUES(1,'CEL','21964642215',1)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(2,'CEL','21978752465',2)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(3,'CEL','2199586574',3)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(4,'CEL','21985887489',4)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(5,'CEL','21977456589',5)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(6,'CEL','21987976632',6)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(7,'CEL','21977459832',7)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(8,'CEL','21975732521',8)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(9,'CEL','21966325758',9)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(10,'CEL','21988989692',10)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(11,'CEL','21970725893',11)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(12,'CEL','21963625859',12)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(13,'CEL','21975723681',13)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(14,'CEL','21980826644',14)
INSERT INTO TELEFONES_FUNCIONARIOS VALUES(15,'CEL','21985847722',15)
GO
--------------------------------------------------------------------------------------------------------------------------------
/* INSERTS DOS REGISTROS DE ATIVIDADES */

INSERT INTO REGISTROS VALUES(1,'2020-10-01',1,6,3)
INSERT INTO REGISTROS VALUES(2,'2020-10-02',2,2,6)
INSERT INTO REGISTROS VALUES(3,'2020-10-02',2,7,6)
INSERT INTO REGISTROS VALUES(4,'2020-10-02',2,8,6)
INSERT INTO REGISTROS VALUES(5,'2020-10-05',2,2,6)
INSERT INTO REGISTROS VALUES(6,'2020-10-05',2,7,6)
INSERT INTO REGISTROS VALUES(7,'2020-10-05',2,8,6)
INSERT INTO REGISTROS VALUES(8,'2020-10-05',10,3,5)
INSERT INTO REGISTROS VALUES(9,'2020-10-05',10,1,5)
INSERT INTO REGISTROS VALUES(10,'2020-10-05',10,4,5)
INSERT INTO REGISTROS VALUES(11,'2020-10-05',10,5,5)
INSERT INTO REGISTROS VALUES(12,'2020-10-05',10,6,5)
INSERT INTO REGISTROS VALUES(13,'2020-10-06',7,4,2)
INSERT INTO REGISTROS VALUES(14,'2020-10-06',7,6,2)
INSERT INTO REGISTROS VALUES(15,'2020-10-06',3,7,1)
INSERT INTO REGISTROS VALUES(16,'2020-10-06',3,8,1)
INSERT INTO REGISTROS VALUES(17,'2020-10-06',3,10,1)
INSERT INTO REGISTROS VALUES(18,'2020-10-07',2,2,6)
INSERT INTO REGISTROS VALUES(19,'2020-10-07',2,7,6)
INSERT INTO REGISTROS VALUES(20,'2020-10-07',2,8,6)
INSERT INTO REGISTROS VALUES(21,'2020-10-07',10,3,5)
INSERT INTO REGISTROS VALUES(22,'2020-10-07',10,1,5)
INSERT INTO REGISTROS VALUES(23,'2020-10-07',10,4,5)
INSERT INTO REGISTROS VALUES(24,'2020-10-07',10,5,5)
INSERT INTO REGISTROS VALUES(25,'2020-10-07',10,6,5)
INSERT INTO REGISTROS VALUES(26,'2020-10-07',1,6,3)
INSERT INTO REGISTROS VALUES(27,'2020-10-07',13,7,3)
INSERT INTO REGISTROS VALUES(28,'2020-10-08',7,4,2)
INSERT INTO REGISTROS VALUES(29,'2020-10-08',7,6,2)
INSERT INTO REGISTROS VALUES(30,'2020-10-08',3,7,1)
INSERT INTO REGISTROS VALUES(31,'2020-10-08',3,8,1)
INSERT INTO REGISTROS VALUES(32,'2020-10-08',3,10,1)
INSERT INTO REGISTROS VALUES(33,'2020-10-08',1,6,3)
INSERT INTO REGISTROS VALUES(34,'2020-10-08',13,7,3)
INSERT INTO REGISTROS VALUES(35,'2020-10-09',13,8,3)
INSERT INTO REGISTROS VALUES(36,'2020-10-09',13,9,3)
INSERT INTO REGISTROS VALUES(37,'2020-10-09',13,10,3)
INSERT INTO REGISTROS VALUES(38,'2020-10-09',2,2,6)
INSERT INTO REGISTROS VALUES(39,'2020-10-09',2,7,6)
INSERT INTO REGISTROS VALUES(40,'2020-10-09',2,8,6)
INSERT INTO REGISTROS VALUES(41,'2020-10-09',10,3,5)
INSERT INTO REGISTROS VALUES(42,'2020-10-09',10,1,5)
INSERT INTO REGISTROS VALUES(43,'2020-10-09',10,4,5)
INSERT INTO REGISTROS VALUES(44,'2020-10-09',10,5,5)
INSERT INTO REGISTROS VALUES(45,'2020-10-09',10,6,5)
INSERT INTO REGISTROS VALUES(46,'2020-10-10',1,6,3)
INSERT INTO REGISTROS VALUES(47,'2020-10-10',13,7,3)
INSERT INTO REGISTROS VALUES(48,'2020-10-10',13,8,3)
INSERT INTO REGISTROS VALUES(49,'2020-10-12',2,2,6)
INSERT INTO REGISTROS VALUES(50,'2020-10-12',2,7,6)
INSERT INTO REGISTROS VALUES(51,'2020-10-12',2,8,6)
INSERT INTO REGISTROS VALUES(52,'2020-10-12',10,3,5)
INSERT INTO REGISTROS VALUES(53,'2020-10-12',10,1,5)
INSERT INTO REGISTROS VALUES(54,'2020-10-12',10,4,5)
INSERT INTO REGISTROS VALUES(55,'2020-10-12',10,5,5)
INSERT INTO REGISTROS VALUES(56,'2020-10-12',10,6,5)
INSERT INTO REGISTROS VALUES(57,'2020-10-12',13,7,3)
INSERT INTO REGISTROS VALUES(58,'2020-10-12',13,8,3)
INSERT INTO REGISTROS VALUES(59,'2020-10-13',7,4,2)
INSERT INTO REGISTROS VALUES(60,'2020-10-13',7,6,2)
INSERT INTO REGISTROS VALUES(61,'2020-10-13',3,7,1)
INSERT INTO REGISTROS VALUES(62,'2020-10-13',3,8,1)
INSERT INTO REGISTROS VALUES(63,'2020-10-13',3,10,1)
INSERT INTO REGISTROS VALUES(64,'2020-10-13',1,6,3)
INSERT INTO REGISTROS VALUES(65,'2020-10-13',13,7,3)
INSERT INTO REGISTROS VALUES(66,'2020-10-13',13,8,3)
INSERT INTO REGISTROS VALUES(67,'2020-10-14',2,2,6)
INSERT INTO REGISTROS VALUES(68,'2020-10-14',2,7,6)
INSERT INTO REGISTROS VALUES(69,'2020-10-14',2,8,6)
INSERT INTO REGISTROS VALUES(70,'2020-10-14',10,3,5)
INSERT INTO REGISTROS VALUES(71,'2020-10-14',10,1,5)
INSERT INTO REGISTROS VALUES(72,'2020-10-14',10,4,5)
INSERT INTO REGISTROS VALUES(73,'2020-10-14',10,5,5)
INSERT INTO REGISTROS VALUES(74,'2020-10-14',10,6,5)
INSERT INTO REGISTROS VALUES(75,'2020-10-14',13,7,3)
INSERT INTO REGISTROS VALUES(76,'2020-10-14',13,8,3)
INSERT INTO REGISTROS VALUES(77,'2020-10-16',2,2,6)
INSERT INTO REGISTROS VALUES(78,'2020-10-16',2,7,6)
INSERT INTO REGISTROS VALUES(79,'2020-10-16',2,8,6)
INSERT INTO REGISTROS VALUES(80,'2020-10-16',10,3,5)
INSERT INTO REGISTROS VALUES(81,'2020-10-16',10,1,5)
INSERT INTO REGISTROS VALUES(82,'2020-10-16',10,4,5)
INSERT INTO REGISTROS VALUES(83,'2020-10-16',10,5,5)
INSERT INTO REGISTROS VALUES(84,'2020-10-16',10,6,5)
INSERT INTO REGISTROS VALUES(85,'2020-10-16',13,7,3)
INSERT INTO REGISTROS VALUES(86,'2020-10-16',13,8,3)
INSERT INTO REGISTROS VALUES(87,'2020-10-17',13,9,3)
INSERT INTO REGISTROS VALUES(88,'2020-10-17',13,10,3)
INSERT INTO REGISTROS VALUES(89,'2020-10-19',2,2,6)
INSERT INTO REGISTROS VALUES(90,'2020-10-19',2,7,6)
INSERT INTO REGISTROS VALUES(91,'2020-10-19',2,8,6)
INSERT INTO REGISTROS VALUES(92,'2020-10-19',10,3,5)
INSERT INTO REGISTROS VALUES(93,'2020-10-19',10,1,5)
INSERT INTO REGISTROS VALUES(94,'2020-10-19',10,4,5)
INSERT INTO REGISTROS VALUES(95,'2020-10-19',10,5,5)
INSERT INTO REGISTROS VALUES(96,'2020-10-19',10,6,5)
INSERT INTO REGISTROS VALUES(97,'2020-10-19',13,7,3)
INSERT INTO REGISTROS VALUES(98,'2020-10-19',13,8,3)
INSERT INTO REGISTROS VALUES(99,'2020-10-19',13,9,3)
INSERT INTO REGISTROS VALUES(100,'2020-10-19',13,10,3)
INSERT INTO REGISTROS VALUES(101,'2020-10-20',7,4,2)
INSERT INTO REGISTROS VALUES(102,'2020-10-20',7,6,2)
INSERT INTO REGISTROS VALUES(103,'2020-10-20',3,7,1)
INSERT INTO REGISTROS VALUES(104,'2020-10-20',3,8,1)
INSERT INTO REGISTROS VALUES(105,'2020-10-20',3,10,1)
INSERT INTO REGISTROS VALUES(106,'2020-10-20',13,7,3)
INSERT INTO REGISTROS VALUES(107,'2020-10-20',13,8,3)
INSERT INTO REGISTROS VALUES(108,'2020-10-21',2,2,6)
INSERT INTO REGISTROS VALUES(109,'2020-10-21',2,7,6)
INSERT INTO REGISTROS VALUES(110,'2020-10-21',2,8,6)
INSERT INTO REGISTROS VALUES(111,'2020-10-21',10,3,5)
INSERT INTO REGISTROS VALUES(112,'2020-10-21',10,1,5)
INSERT INTO REGISTROS VALUES(113,'2020-10-21',10,4,5)
INSERT INTO REGISTROS VALUES(114,'2020-10-21',10,5,5)
INSERT INTO REGISTROS VALUES(115,'2020-10-21',10,6,5)
INSERT INTO REGISTROS VALUES(116,'2020-10-21',13,7,3)
INSERT INTO REGISTROS VALUES(117,'2020-10-21',13,8,3)
INSERT INTO REGISTROS VALUES(118,'2020-10-21',13,9,3)
INSERT INTO REGISTROS VALUES(119,'2020-10-21',13,10,3)
INSERT INTO REGISTROS VALUES(120,'2020-10-22',7,4,2)
INSERT INTO REGISTROS VALUES(121,'2020-10-22',7,6,2)
INSERT INTO REGISTROS VALUES(122,'2020-10-22',3,7,1)
INSERT INTO REGISTROS VALUES(123,'2020-10-22',3,8,1)
INSERT INTO REGISTROS VALUES(124,'2020-10-22',3,10,1)
INSERT INTO REGISTROS VALUES(125,'2020-10-23',2,7,6)
INSERT INTO REGISTROS VALUES(126,'2020-10-23',2,8,6)
INSERT INTO REGISTROS VALUES(127,'2020-10-23',10,3,5)
INSERT INTO REGISTROS VALUES(128,'2020-10-23',10,1,5)
INSERT INTO REGISTROS VALUES(129,'2020-10-23',10,4,5)
INSERT INTO REGISTROS VALUES(130,'2020-10-23',10,5,5)
INSERT INTO REGISTROS VALUES(131,'2020-10-23',10,6,5)
INSERT INTO REGISTROS VALUES(132,'2020-10-23',13,7,3)
INSERT INTO REGISTROS VALUES(133,'2020-10-23',13,8,3)
INSERT INTO REGISTROS VALUES(134,'2020-10-23',13,9,3)
INSERT INTO REGISTROS VALUES(135,'2020-10-23',13,10,3)
INSERT INTO REGISTROS VALUES(136,'2020-10-24',13,7,3)
INSERT INTO REGISTROS VALUES(137,'2020-10-24',13,8,3)
INSERT INTO REGISTROS VALUES(138,'2020-10-24',13,9,3)
INSERT INTO REGISTROS VALUES(139,'2020-10-24',13,10,3)
INSERT INTO REGISTROS VALUES(140,'2020-10-26',2,7,6)
INSERT INTO REGISTROS VALUES(141,'2020-10-26',2,8,6)
INSERT INTO REGISTROS VALUES(142,'2020-10-26',10,3,5)
INSERT INTO REGISTROS VALUES(143,'2020-10-26',10,1,5)
INSERT INTO REGISTROS VALUES(144,'2020-10-26',10,4,5)
INSERT INTO REGISTROS VALUES(145,'2020-10-26',10,5,5)
INSERT INTO REGISTROS VALUES(146,'2020-10-27',7,4,2)
INSERT INTO REGISTROS VALUES(147,'2020-10-27',7,6,2)
INSERT INTO REGISTROS VALUES(148,'2020-10-27',3,7,1)
INSERT INTO REGISTROS VALUES(149,'2020-10-27',3,8,1)
INSERT INTO REGISTROS VALUES(150,'2020-10-27',3,10,1)
INSERT INTO REGISTROS VALUES(151,'2020-10-28',2,7,6)
INSERT INTO REGISTROS VALUES(152,'2020-10-28',2,8,6)
INSERT INTO REGISTROS VALUES(153,'2020-10-28',10,3,5)
INSERT INTO REGISTROS VALUES(154,'2020-10-28',10,1,5)
INSERT INTO REGISTROS VALUES(155,'2020-10-28',10,4,5)
INSERT INTO REGISTROS VALUES(156,'2020-10-28',10,5,5)
INSERT INTO REGISTROS VALUES(157,'2020-10-28',10,6,5)
INSERT INTO REGISTROS VALUES(158,'2020-10-29',13,7,3)
INSERT INTO REGISTROS VALUES(159,'2020-10-29',13,8,3)
INSERT INTO REGISTROS VALUES(160,'2020-10-29',13,9,3)
INSERT INTO REGISTROS VALUES(161,'2020-10-29',13,10,3)
INSERT INTO REGISTROS VALUES(162,'2020-10-29',7,4,2)
INSERT INTO REGISTROS VALUES(163,'2020-10-29',7,6,2)
INSERT INTO REGISTROS VALUES(164,'2020-10-29',3,7,1)
INSERT INTO REGISTROS VALUES(165,'2020-10-29',3,8,1)
INSERT INTO REGISTROS VALUES(166,'2020-10-29',3,10,1)
INSERT INTO REGISTROS VALUES(167,'2020-10-30',2,7,6)
INSERT INTO REGISTROS VALUES(168,'2020-10-30',2,8,6)
INSERT INTO REGISTROS VALUES(169,'2020-10-30',10,3,5)
INSERT INTO REGISTROS VALUES(170,'2020-10-30',10,1,5)
INSERT INTO REGISTROS VALUES(171,'2020-10-30',10,4,5)
INSERT INTO REGISTROS VALUES(172,'2020-10-30',10,5,5)
INSERT INTO REGISTROS VALUES(173,'2020-10-30',10,6,5)
GO

/* AGORA, VAMOS CRIAR AS CONSTRAINTS DAS CHAVES PRIMÁRIAS
E DAS CHAVES ESTRANGEIRAS */

-- CHAVES PRIMÁRIAS 

ALTER TABLE INSCRITOS ADD CONSTRAINT PK_INSCRITOS
PRIMARY KEY(IDINSCRITO)
GO

ALTER TABLE ENDERECOS ADD CONSTRAINT PK_ENDERECOS 
PRIMARY KEY(IDENDERECO) 
GO

ALTER TABLE TELEFONES ADD CONSTRAINT PK_TELEFONES
PRIMARY KEY(IDTELEFONE)
GO

ALTER TABLE ATIVIDADES ADD CONSTRAINT PK_ATIVIDADES 
PRIMARY KEY(IDATIVIDADE)
GO

ALTER TABLE INSCRITOS_ATIVIDADES ADD CONSTRAINT PK_INSCRITOS_ATIVIDADES 
PRIMARY KEY(IDIA) 
GO

ALTER TABLE FUNCIONARIOS ADD CONSTRAINT PK_FUNCIONARIOS 
PRIMARY KEY(IDFUNCIONARIO)
GO 

ALTER TABLE ENDERECOS_FUNCIONARIOS ADD CONSTRAINT PK_ENDERECOS_FUNCIONARIOS
PRIMARY KEY(IDEF)
GO

ALTER TABLE TELEFONES_FUNCIONARIOS ADD CONSTRAINT PK_TELEFONES_FUNCIONARIOS
PRIMARY KEY(IDTF)
GO

ALTER TABLE DEPARTAMENTOS ADD CONSTRAINT PK_DEPARTAMENTOS 
PRIMARY KEY(IDDEPARTAMENTO)
GO

ALTER TABLE REGISTROS ADD CONSTRAINT PK_REGISTROS
PRIMARY KEY(IDREG)
GO


-- CHAVES ESTRANGEIRAS

ALTER TABLE ENDERECOS ADD CONSTRAINT FK_ENDERECOS_INSCRITOS 
FOREIGN KEY(ID_INSCRITO) REFERENCES INSCRITOS(IDINSCRITO) 
GO 

ALTER TABLE TELEFONES ADD CONSTRAINT FK_TELEFONES_INSCRITOS 
FOREIGN KEY(ID_INSCRITO) REFERENCES INSCRITOS(IDINSCRITO)
GO

ALTER TABLE INSCRITOS_ATIVIDADES ADD CONSTRAINT FK_INSCRITOS_ATIVIDADES_INSCRITOS
FOREIGN KEY(ID_INSCRITO) REFERENCES INSCRITOS(IDINSCRITO)
GO

ALTER TABLE INSCRITOS_ATIVIDADES ADD CONSTRAINT FK_INSCRITOS_ATIVIDADES_ATIVIDADES 
FOREIGN KEY(ID_ATIVIDADE) REFERENCES ATIVIDADES(IDATIVIDADE)
GO

ALTER TABLE TELEFONES_FUNCIONARIOS ADD CONSTRAINT FK_TELEFONES_FUNCIONARIOS_FUNCIONARIOS
FOREIGN KEY(ID_FUNCIONARIO) REFERENCES FUNCIONARIOS(IDFUNCIONARIO)
GO 

ALTER TABLE ENDERECOS_FUNCIONARIOS ADD CONSTRAINT FK_ENDERECOS_FUNCIONARIOS_FUNCIONARIOS 
FOREIGN KEY(ID_FUNCIONARIO) REFERENCES FUNCIONARIOS(IDFUNCIONARIO)
GO

ALTER TABLE REGISTROS ADD CONSTRAINT FK_REGISTROS_FUNCIONARIOS
FOREIGN KEY(ID_FUNCIONARIO) REFERENCES FUNCIONARIOS(IDFUNCIONARIO)
GO

ALTER TABLE REGISTROS ADD CONSTRAINT FK_REGISTROS_INSCRITOS
FOREIGN KEY(ID_INSCRITO) REFERENCES INSCRITOS(IDINSCRITO)
GO 

ALTER TABLE REGISTROS ADD CONSTRAINT FK_REGISTROS_ATIVIDADES
FOREIGN KEY(ID_ATIVIDADE) REFERENCES ATIVIDADES(IDATIVIDADE)
GO

ALTER TABLE FUNCIONARIOS ADD CONSTRAINT FK_FUNCIONARIOS_DEPARTAMENTOS
FOREIGN KEY(ID_DEPARTAMENTO) REFERENCES DEPARTAMENTOS(IDDEPARTAMENTO)
GO

/*PROJETANDO ALGUMAS OPÇÕES DE VISUALIZAÇÃO */

-- RELATÓRIO COM NOMES, ENDEREÇOS E TELEFONE

SELECT I.NOME 
	   , I.SEXO
	   , I.NASCIMENTO 
	   , ISNULL(I.EMAIL,'NÃO POSSUI EMAIL') 			AS EMAIL
	   , I.CPF
	   , I.SOCIO
	   , E.RUA
	   , E.BAIRRO
	   , E.CIDADE
	   , E.ESTADO
	   , E.CEP
	   , T.TIPO
	   , T.NUMERO
FROM   INSCRITOS 						I 
INNER  JOIN ENDERECOS 					E
  ON I.IDINSCRITO = E.ID_INSCRITO  
INNER  JOIN TELEFONES 					T 
  ON I.IDINSCRITO = T.ID_INSCRITO 
GO

/* CONSEGUI CRIAR, GRAÇAS A DEUS, A QUERY QUE TROUXESSE OS NOMES DOS INSCRITOS 
JÁ LIGADOS ÀS SUAS DEVIDAS ATIVIDADES, PASSANDO PELA LÓGICA DA TABELA ASSOCIATIVA */ 

SELECT I.NOME
	   , I.SEXO 
	   , I.SOCIO 
	   , A.ATIVIDADE 
	   , A.VALOR 
	   , A.VALOR_SOCIO 
FROM   INSCRITOS_ATIVIDADES           IA
INNER  JOIN ATIVIDADES                A 
  ON A.IDATIVIDADE = IA.ID_ATIVIDADE
INNER  JOIN INSCRITOS                 I
  ON I.IDINSCRITO = IA.ID_INSCRITO
GO
--------------------------------------------------

/* SELECT PARA VER REGISTROS */

SELECT R.DATA
	   , F.NOME AS PROFESSOR
	   , I.NOME AS ALUNO
	   , A.ATIVIDADE 
FROM   REGISTROS                      R 
INNER  JOIN FUNCIONARIOS              F
  ON F.IDFUNCIONARIO = R.ID_FUNCIONARIO 
INNER  JOIN INSCRITOS                 I
  ON I.IDINSCRITO = R.ID_INSCRITO 
INNER  JOIN ATIVIDADES                A
  ON A.IDATIVIDADE = R.ID_ATIVIDADE 
GO
-------------------------------------------------------------------------------------
/* SELECT PARA VER QUANTAS AULAS CADA INSTRUTOR MINISTROU EM OUTUBRO DE 2020 */

SELECT COUNT(DISTINCT R.DATA) AS "TOTAL DE AULAS"
	   , F.NOME AS PROFESSOR
FROM   REGISTROS                      R 
INNER  JOIN FUNCIONARIOS              F
  ON F.IDFUNCIONARIO = R.ID_FUNCIONARIO 
INNER  JOIN INSCRITOS                 I
  ON I.IDINSCRITO = R.ID_INSCRITO 
INNER  JOIN ATIVIDADES                A
  ON A.IDATIVIDADE = R.ID_ATIVIDADE 
GROUP BY F.NOME
ORDER BY COUNT(DISTINCT R.DATA) DESC
GO
-------------------------------------------------------------------------------------
/* TOTAL DE ALUNOS PARA CADA PROFESSOR */ 

SELECT COUNT(DISTINCT I.NOME) AS ALUNOS 
	                  , F.NOME AS PROFESSORES   
FROM   REGISTROS                      R 
INNER  JOIN FUNCIONARIOS              F
  ON F.IDFUNCIONARIO = R.ID_FUNCIONARIO 
INNER  JOIN INSCRITOS                 I
  ON I.IDINSCRITO = R.ID_INSCRITO 
INNER  JOIN ATIVIDADES                A
  ON A.IDATIVIDADE = R.ID_ATIVIDADE 
GROUP BY F.NOME
GO
-------------------------------------------------------------------------------------
/* TOTAL DE ALUNOS EM CADA ATIVIDADE */ 

SELECT COUNT(DISTINCT I.NOME) AS "No DE ALUNOS" 	                  
					  , A.ATIVIDADE
FROM   REGISTROS                      R 
INNER  JOIN FUNCIONARIOS              F
  ON F.IDFUNCIONARIO = R.ID_FUNCIONARIO 
INNER  JOIN INSCRITOS                 I
  ON I.IDINSCRITO = R.ID_INSCRITO 
INNER  JOIN ATIVIDADES                A
  ON A.IDATIVIDADE = R.ID_ATIVIDADE 
GROUP BY A.ATIVIDADE
GO
-------------------------------------------------------------------------------------
/* TOTAL DE ALUNOS PARA CADA PROFESSOR, POR ATIVIDADE */ 

SELECT COUNT(DISTINCT I.NOME) AS "No DE ALUNOS" 	
	            , F.NOME AS PROFESSOR
	            , A.ATIVIDADE
	   
FROM   REGISTROS                      R 
INNER  JOIN FUNCIONARIOS              F
  ON F.IDFUNCIONARIO = R.ID_FUNCIONARIO 
INNER  JOIN INSCRITOS                 I
  ON I.IDINSCRITO = R.ID_INSCRITO 
INNER  JOIN ATIVIDADES                A
  ON A.IDATIVIDADE = R.ID_ATIVIDADE
GROUP BY F.NOME

GO
-------------------------------------------------------------------------------------
/* PARA FICAR MAIS "ARRUMADO", VOU DEIXAR AS PROJEÇÕES ACIMA COMO "VIEWS" */
--------------------------------------------------------------------------------
CREATE VIEW V_RELATORIO_INSCRITOS AS 
SELECT I.NOME 
	   , I.SEXO
	   , I.NASCIMENTO 
	   , ISNULL(I.EMAIL,'NÃO POSSUI EMAIL') 			AS EMAIL
	   , I.CPF
	   , I.SOCIO
	   , E.RUA
	   , E.BAIRRO
	   , E.CIDADE
	   , E.ESTADO
	   , E.CEP
	   , T.TIPO
	   , T.NUMERO
FROM   INSCRITOS 						I 
INNER  JOIN ENDERECOS 					E
  ON I.IDINSCRITO = E.ID_INSCRITO  
INNER  JOIN TELEFONES 					T 
  ON I.IDINSCRITO = T.ID_INSCRITO 
GO
-------------------------------------------------------------------------------------------------
CREATE VIEW V_RELATORIO_INSCRITOS_ATIVIDADES AS 
SELECT I.NOME
	   , I.SEXO 
	   , I.SOCIO 
	   , A.ATIVIDADE 
	   , A.VALOR 
	   , A.VALOR_SOCIO 
FROM   INSCRITOS_ATIVIDADES           IA
INNER  JOIN ATIVIDADES                A 
  ON A.IDATIVIDADE = IA.ID_ATIVIDADE
INNER  JOIN INSCRITOS                 I
  ON I.IDINSCRITO = IA.ID_INSCRITO
GO
--------------------------------------------------------------------------------------------------
CREATE VIEW V_RELATORIO_REGISTROS AS
SELECT R.DATA
	   , F.NOME AS "PROFESSOR"
	   , I.NOME AS "ALUNO"
	   , A.ATIVIDADE 
FROM   REGISTROS                      R 
INNER  JOIN FUNCIONARIOS              F
  ON F.IDFUNCIONARIO = R.ID_FUNCIONARIO 
INNER  JOIN INSCRITOS                 I
  ON I.IDINSCRITO = R.ID_INSCRITO 
INNER  JOIN ATIVIDADES                A
  ON A.IDATIVIDADE = R.ID_ATIVIDADE 
GO
--------------------------------------------------------------------------------------------------

/* REQUISITOS DO TULIO:


2 - e depois uma outra com quantos alunos cada instrutor tem por atividade

4 - Quantas atividades os alunos fizeram

5 - E quantas atividades cada aluno tem
